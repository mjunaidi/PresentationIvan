/*!
 * jQuery Transit - CSS3 transitions and transformations
 * Copyright(c) 2011 Rico Sta. Cruz <rico@ricostacruz.com>
 * MIT Licensed.
 *
 * http://ricostacruz.com/jquery.transit
 * http://github.com/rstacruz/jquery.transit
 */

(function(e){"use strict";function r(e){var n=["Moz","Webkit","O","ms"];var r=e.charAt(0).toUpperCase()+e.substr(1);if(e in t.style){return e}for(var i=0;i<n.length;++i){var s=n[i]+r;if(s in t.style){return s}}}function i(){t.style[n.transform]="";t.style[n.transform]="rotateY(90deg)";return t.style[n.transform]!==""}function a(e){if(typeof e==="string"){this.parse(e)}return this}function f(e,t,n){if(t===true){e.queue(n)}else if(t){e.queue(t,n)}else{n()}}function l(t){var n=[];e.each(t,function(t){t=e.camelCase(t);t=e.transit.propertyMap[t]||t;t=p(t);if(e.inArray(t,n)===-1){n.push(t)}});return n}function c(t,n,r,i){var s=l(t);if(e.cssEase[r]){r=e.cssEase[r]}var o=""+v(n)+" "+r;if(parseInt(i,10)>0){o+=" "+v(i)}var u=[];e.each(s,function(e,t){u.push(t+" "+o)});return u.join(", ")}function h(t,r){if(!r){e.cssNumber[t]=true}e.transit.propertyMap[t]=n.transform;e.cssHooks[t]={get:function(n){var r=e(n).css("transform")||new a;return r.get(t)},set:function(n,r){var i=e(n).css("transform")||new a;i=i!=="none"?i:new a;i.setFromString(t,r);e(n).css({transform:i})}}}function p(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function d(e,t){if(typeof e==="string"&&!e.match(/^[\-0-9\.]+$/)){return e}else{return""+e+t}}function v(t){var n=t;if(e.fx.speeds[n]){n=e.fx.speeds[n]}return d(n,"ms")}e.transit={version:"0.1.3",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:true,useTransitionEnd:false};var t=document.createElement("div");var n={};var s=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;n.transition=r("transition");n.transitionDelay=r("transitionDelay");n.transform=r("transform");n.transformOrigin=r("transformOrigin");n.transform3d=i();e.extend(e.support,n);var o={MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"};var u=n.transitionEnd=o[n.transition]||null;t=null;e.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)"};e.cssHooks.transform={get:function(t){return e(t).data("transform")},set:function(t,r){var i=r;if(!(i instanceof a)){i=new a(i)}if(n.transform==="WebkitTransform"&&!s){t.style[n.transform]=i.toString(true)}else{t.style[n.transform]=i.toString()}e(t).data("transform",i)}};e.cssHooks.transformOrigin={get:function(e){return e.style[n.transformOrigin]},set:function(e,t){e.style[n.transformOrigin]=t}};e.cssHooks.transition={get:function(e){return e.style[n.transition]},set:function(e,t){e.style[n.transition]=t}};h("scale");h("translate");h("rotate");h("rotateX");h("rotateY");h("rotate3d");h("perspective");h("skewX");h("skewY");h("x",true);h("y",true);a.prototype={setFromString:function(e,t){var n=typeof t==="string"?t.split(","):t.constructor===Array?t:[t];n.unshift(e);a.prototype.set.apply(this,n)},set:function(e){var t=Array.prototype.slice.apply(arguments,[1]);if(this.setter[e]){this.setter[e].apply(this,t)}else{this[e]=t.join(",")}},get:function(e){if(this.getter[e]){return this.getter[e].apply(this)}else{return this[e]||0}},setter:{rotate:function(e){this.rotate=d(e,"deg")},rotateX:function(e){this.rotateX=d(e,"deg")},rotateY:function(e){this.rotateY=d(e,"deg")},scale:function(e,t){if(t===undefined){t=e}this.scale=e+","+t},skewX:function(e){this.skewX=d(e,"deg")},skewY:function(e){this.skewY=d(e,"deg")},perspective:function(e){this.perspective=d(e,"px")},x:function(e){this.set("translate",e,null)},y:function(e){this.set("translate",null,e)},translate:function(e,t){if(this._translateX===undefined){this._translateX=0}if(this._translateY===undefined){this._translateY=0}if(e!==null){this._translateX=d(e,"px")}if(t!==null){this._translateY=d(t,"px")}this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var e=(this.scale||"1,1").split(",");if(e[0]){e[0]=parseFloat(e[0])}if(e[1]){e[1]=parseFloat(e[1])}return e[0]===e[1]?e[0]:e},rotate3d:function(){var e=(this.rotate3d||"0,0,0,0deg").split(",");for(var t=0;t<=3;++t){if(e[t]){e[t]=parseFloat(e[t])}}if(e[3]){e[3]=d(e[3],"deg")}return e}},parse:function(e){var t=this;e.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(e,n,r){t.setFromString(n,r)})},toString:function(e){var t=[];for(var r in this){if(this.hasOwnProperty(r)){if(!n.transform3d&&(r==="rotateX"||r==="rotateY"||r==="perspective"||r==="transformOrigin")){continue}if(r[0]!=="_"){if(e&&r==="scale"){t.push(r+"3d("+this[r]+",1)")}else if(e&&r==="translate"){t.push(r+"3d("+this[r]+",0)")}else{t.push(r+"("+this[r]+")")}}}}return t.join(" ")}};e.fn.transition=e.fn.transit=function(t,r,i,s){var o=this;var a=0;var l=true;if(typeof r==="function"){s=r;r=undefined}if(typeof i==="function"){s=i;i=undefined}if(typeof t.easing!=="undefined"){i=t.easing;delete t.easing}if(typeof t.duration!=="undefined"){r=t.duration;delete t.duration}if(typeof t.complete!=="undefined"){s=t.complete;delete t.complete}if(typeof t.queue!=="undefined"){l=t.queue;delete t.queue}if(typeof t.delay!=="undefined"){a=t.delay;delete t.delay}if(typeof r==="undefined"){r=e.fx.speeds._default}if(typeof i==="undefined"){i=e.cssEase._default}r=v(r);var h=c(t,r,i,a);var p=e.transit.enabled&&n.transition;var d=p?parseInt(r,10)+parseInt(a,10):0;if(d===0){var m=function(e){o.css(t);if(s){s.apply(o)}if(e){e()}};f(o,l,m);return o}var g={};var y=function(r){var i=false;var a=function(){if(i){o.unbind(u,a)}if(d>0){o.each(function(){this.style[n.transition]=g[this]||null})}if(typeof s==="function"){s.apply(o)}if(typeof r==="function"){r()}};if(d>0&&u&&e.transit.useTransitionEnd){i=true;o.bind(u,a)}else{window.setTimeout(a,d)}o.each(function(){if(d>0){this.style[n.transition]=h}e(this).css(t)})};var b=function(e){var t=0;if(n.transition==="MozTransition"&&t<25){t=25}window.setTimeout(function(){y(e)},t)};f(o,l,b);return this};e.transit.getTransitionValue=c})(jQuery);